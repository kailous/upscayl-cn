(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1105:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return pages}});var s=a(849),l=a(7378),n={SELECT_FILE:"Select a File",SELECT_FOLDER:"Select a Folder",UPSCAYL:"Upscale the Image",UPSCAYL_DONE:"Upscaling Done",UPSCAYL_PROGRESS:"Send Progress from Main to Renderer",DOUBLE_UPSCAYL:"Double Upscale the Image",DOUBLE_UPSCAYL_DONE:"Double Upscaling Done",DOUBLE_UPSCAYL_PROGRESS:"Send Double Upscayl Progress from Main to Renderer",FOLDER_UPSCAYL:"Upscale a Folder",FOLDER_UPSCAYL_DONE:"Folder upscaling successful",FOLDER_UPSCAYL_PROGRESS:"Send Folder Upscaling Progress from Main to Renderer",OPEN_FOLDER:"Open Folder",SELECT_CUSTOM_MODEL_FOLDER:"Select a Custom Model Folder",GET_MODELS_LIST:"Send models list from main to renderer",CUSTOM_MODEL_FILES_LIST:"Send custom model files list to renderer",LOG:"Log",STOP:"Stop the current operation",OS:"Get OS",SCALING_AND_CONVERTING:"Adding some finishing touches",UPSCAYL_ERROR:"Upscaling Error"},o=a(6033);let r={APP_STORE_BUILD:!1,SHOW_UPSCAYL_CLOUD_INFO:!1};var i=a(4246);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var icons_Logo=e=>{let t=Object.assign({},e);return(0,i.jsxs)("svg",_objectSpread(_objectSpread({viewBox:"0 0 256 256",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_1263_67)",children:[(0,i.jsx)("path",{d:"M198.54 256H57.46C42.2425 256 27.6185 249.948 16.8475 239.177C6.077 228.407 0 213.782 0 198.54V57.46C0 42.2425 6.077 27.618 16.8475 16.8475C27.6185 6.077 42.2425 0.0245 57.46 0L198.54 0.024498C213.782 0.024498 228.407 6.077 239.177 16.8475C249.948 27.618 256 42.2425 256 57.46V198.54C256 213.782 249.948 228.407 239.177 239.177C228.407 249.948 213.782 256 198.54 256Z",fill:"#304059"}),(0,i.jsx)("mask",{id:"mask0_1263_67",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"256",height:"256",children:(0,i.jsx)("path",{d:"M198.54 256H57.46C42.2425 256 27.6185 249.948 16.8475 239.177C6.077 228.407 0 213.782 0 198.54V57.46C0 42.2425 6.077 27.618 16.8475 16.8475C27.6185 6.077 42.2425 0.0245 57.46 0L198.54 0.024498C213.782 0.024498 228.407 6.077 239.177 16.8475C249.948 27.618 256 42.2425 256 57.46V198.54C256 213.782 249.948 228.407 239.177 239.177C228.407 249.948 213.782 256 198.54 256Z",fill:"white"})}),(0,i.jsxs)("g",{mask:"url(#mask0_1263_67)",children:[(0,i.jsx)("path",{d:"M198.542 243.642H57.4579C32.5664 243.642 12.3579 223.434 12.3579 198.542V57.4582C12.3579 32.5667 32.5664 12.3582 57.4579 12.3582H198.542C223.433 12.3582 243.642 32.5667 243.642 57.4582V198.542C243.642 223.434 223.433 243.642 198.542 243.642Z",fill:"#304059"}),(0,i.jsx)("mask",{id:"mask1_1263_67",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"12",y:"12",width:"232",height:"232",children:(0,i.jsx)("path",{d:"M198.542 243.642H57.4579C32.5664 243.642 12.3579 223.434 12.3579 198.542V57.4582C12.3579 32.5667 32.5664 12.3582 57.4579 12.3582H198.542C223.433 12.3582 243.642 32.5667 243.642 57.4582V198.542C243.642 223.434 223.433 243.642 198.542 243.642Z",fill:"white"})}),(0,i.jsxs)("g",{mask:"url(#mask1_1263_67)",children:[(0,i.jsx)("path",{d:"M127.992 50.9193H89.447V12.3743H127.992V50.9193Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M127.992 89.4637H89.447V50.9192H127.992V89.4637Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M127.992 128.008H89.447V89.4636H127.992V128.008Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M127.992 166.553H89.447V128.008H127.992V166.553Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M127.992 205.098H89.447V166.553H127.992V205.098Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M127.992 243.642H89.447V205.098H127.992V243.642Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M89.4469 50.9193H50.9023V12.3743H89.4469V50.9193Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M89.4469 89.4637H50.9023V50.9192H89.4469V89.4637Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M89.4469 128.008H50.9023V89.4636H89.4469V128.008Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M89.4469 166.553H50.9023V128.008H89.4469V166.553Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M89.4469 205.098H50.9023V166.553H89.4469V205.098Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M89.4469 243.642H50.9023V205.098H89.4469V243.642Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M50.9024 50.92H12.3579V12.375H50.9024V50.92Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M50.9024 89.4637H12.3579V50.9192H50.9024V89.4637Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M50.9024 128.008H12.3579V89.4636H50.9024V128.008Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M50.9024 166.553H12.3579V128.008H50.9024V166.553Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M50.9024 205.098H12.3579V166.553H50.9024V205.098Z",fill:"#4791CE"}),(0,i.jsx)("path",{d:"M50.9024 243.642H12.3579V205.098H50.9024V243.642Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M243.642 243.659H128V12.3743H243.642V243.659Z",fill:"url(#paint0_linear_1263_67)"}),(0,i.jsx)("path",{d:"M156.701 128C156.701 143.845 143.837 156.71 127.992 156.71C112.146 156.71 99.2825 143.845 99.2825 128C99.2825 112.155 112.146 99.2908 127.992 99.2908C143.837 99.2908 156.701 112.155 156.701 128Z",fill:"#304059"}),(0,i.jsx)("path",{d:"M148.396 128L142.135 123.754L135.874 119.509V128V136.492L142.135 132.246L148.396 128Z",fill:"#87BDFF"}),(0,i.jsx)("path",{d:"M107.588 128L113.857 123.754L120.126 119.509V128V136.492L113.857 132.246L107.588 128Z",fill:"#87BDFF"})]}),(0,i.jsx)("path",{d:"M134.182 247.202H121.818V8.79858H134.182V247.202Z",fill:"#304059"})]})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"paint0_linear_1263_67",x1:"184.354",y1:"20.4191",x2:"176.727",y2:"245.417",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#87BDFF"}),(0,i.jsx)("stop",{offset:"0.970833",stopColor:"#4791CE"})]}),(0,i.jsx)("clipPath",{id:"clip0_1263_67",children:(0,i.jsx)("rect",{width:"256",height:"256",fill:"white"})})]})]}))};function Header({version:e}){return(0,i.jsx)("a",{href:"https://github.com/upscayl/upscayl",target:"_blank",className:"outline-none focus-visible:ring-2","data-tooltip-id":"tooltip","data-tooltip-content":"Star us on GitHub \uD83D\uDE01",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 px-5 py-5",children:[(0,i.jsx)(icons_Logo,{className:"inline-block h-14 w-14"}),(0,i.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold",children:["Upscayl"," ",(0,i.jsxs)("span",{className:"text-xs",children:[e," ",r.APP_STORE_BUILD&&"Mac"]})]}),(0,i.jsx)("p",{className:"",children:"AI Image Upscaler"})]})]})})}var c=a(9737);let d=(0,c.O4)("showNewsModal",!1),u=(0,c.O4)("news",null);var m=a(8976),components_Footer=function(){let e=(0,m.b9)(d),t=(0,m.Dv)(u);return(0,i.jsxs)("div",{className:"p-2 text-center text-xs text-base-content/50",children:[t&&!t?.data?.dontShow&&(0,i.jsx)("button",{className:"badge badge-neutral mb-2",onClick:()=>e(!0),children:"UPSCAYL NEWS"}),(0,i.jsxs)("p",{children:["Copyright \xa9 ",new Date().getFullYear()," -"," ",(0,i.jsx)("a",{className:"font-bold",href:"https://github.com/upscayl/upscayl",target:"_blank",children:"Upscayl"})]}),(0,i.jsxs)("p",{children:["By"," ",(0,i.jsx)("a",{href:"https://github.com/upscayl",className:"font-bold",target:"_blank",children:"The Upscayl Team"})]})]})},view_ProgressBar=function({progress:e,doubleUpscaylCounter:t,stopHandler:a,batchMode:s}){let[n,o]=l.useState(0);return(0,l.useEffect)(()=>{let t=e.trim().replace(/\n/g,"");t.includes("Successful")&&o(e=>e+1)},[e]),(0,i.jsx)("div",{className:"absolute z-50 flex h-full w-full flex-col items-center justify-center bg-base-300/50 backdrop-blur-lg",children:(0,i.jsxs)("div",{className:"flex flex-col items-center rounded-btn bg-base-100/50 p-4 backdrop-blur-lg",children:[(0,i.jsx)(icons_Logo,{className:"spinner mb-4 h-12 w-12"}),(0,i.jsxs)("p",{className:"rounded-full px-2 pb-2 font-bold",children:[s&&"Batch Upscale In Progress: "+n,!s&&(t>0?`${e}
Pass ${t}`:`${e}`)]}),(0,i.jsx)("p",{className:"animate-pulse rounded-full px-2 pb-3 text-sm font-medium",children:"Doing the Upscayl magic..."}),(0,i.jsx)("button",{onClick:a,className:"btn btn-outline",children:"STOP"})]})})},view_RightPaneInfo=function({version:e,batchMode:t}){return(0,i.jsxs)("div",{className:"flex flex-col items-center bg-base-200 p-4 rounded-btn",children:[(0,i.jsxs)("p",{className:"pb-1 text-lg font-semibold",children:["Select ",t?"a Folder":"an Image"," to Upscayl"]}),t?(0,i.jsx)("p",{className:"w-full pb-5 text-center md:w-96 text-base-content/80",children:"Make sure that the folder doesn't contain anything except PNG, JPG, JPEG & WEBP images."}):(0,i.jsx)("p",{className:"w-full pb-5 text-center md:w-96 text-base-content/80",children:"Select or drag and drop a PNG, JPG, JPEG or WEBP image."}),(0,i.jsxs)("p",{className:"text-sm badge badge-primary",children:["Upscayl v",e]})]})},p=a(2407);let h=(0,c.O4)("customModelsPath",null),g=(0,c.O4)("scale","4"),x=(0,p.cn)(!1),f=(0,c.O4)("savedOutputPath",null),b=(0,p.cn)(""),j=(0,c.O4)("rememberOutputFolder",!1),S=(0,c.O4)("dontShowCloudModal",!1),v=(0,c.O4)("noImageProcessing",!1),w=(0,c.O4)("compression",0),y=(0,c.O4)("overwrite",!1),N=(0,c.O4)("turnOffNotifications",!1),O=(0,c.O4)("viewType","slider"),C=(0,c.O4)("lensSize",100),I=(0,c.O4)("customWidth",0),E=(0,c.O4)("useCustomWidth",!1),D=(0,c.O4)("tileSize",null),P=(0,c.O4)("showSidebar",!0);var _=a(9634),U=a(7680),view_ImageOptions=({zoomAmount:e,setZoomAmount:t,resetImagePaths:a,hideZoomOptions:s})=>{let{0:n,1:o}=(0,l.useState)(!1),[r,c]=(0,m.KO)(O),[d,u]=(0,m.KO)(C);return(0,l.useEffect)(()=>{localStorage.getItem("zoomAmount")?t(localStorage.getItem("zoomAmount")):localStorage.setItem("zoomAmount",e)},[]),(0,i.jsxs)("div",{onDoubleClick:e=>{e.stopPropagation()},className:`fixed right-0 top-0 z-50 h-screen w-[28rem] bg-base-100 text-base-content shadow-xl shadow-base-300 transition-all duration-500 ${n?"right-0":"-right-full translate-x-full"}`,children:[(0,i.jsx)("div",{className:"group absolute right-[100%] top-1/2 z-50 flex cursor-pointer items-center gap-2 rounded-btn rounded-r-none bg-base-100 p-4 transition-all duration-500",onClick:()=>{o(!n)},children:(0,i.jsx)(U.Z,{className:(0,_.cn)("animate text-xl text-base-content",n?"rotate-180":"rotate-0")})}),(0,i.jsxs)("div",{className:"flex flex-col justify-center gap-5 overflow-auto p-5",children:[(0,i.jsx)("button",{className:"btn btn-primary",onClick:a,children:"Reset Image"}),(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"Lens View"}),(0,i.jsx)("input",{type:"checkbox",className:"toggle",checked:"slider"===r,onChange:e=>{c(e.target.checked?"slider":"lens")}}),(0,i.jsx)("p",{className:"text-sm font-medium",children:"Slider View"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("p",{className:"text-sm font-medium",children:["Zoom Amount (",e,"%)"]}),(0,i.jsx)("input",{type:"range",min:"100",max:"1000",step:10,className:"range range-md",value:parseInt(e),onChange:e=>{t(e.target.value),localStorage.setItem("zoomAmount",e.target.value)}})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsxs)("p",{className:"text-sm font-medium",children:["Lens Size (",d/10,")"]}),(0,i.jsx)("input",{type:"range",min:"20",max:"400",step:10,className:"range range-md",value:d,onChange:e=>{u(parseInt(e.target.value))}})]})]})]})},L=a(804),k=a(5613);let T=[{label:"General Photo (Real-ESRGAN)",value:"realesrgan-x4plus"},{label:"General Photo (Fast Real-ESRGAN)",value:"realesrgan-x4fast"},{label:"General Photo (Remacri)",value:"remacri"},{label:"General Photo (Ultramix Balanced)",value:"ultramix_balanced"},{label:"General Photo (Ultrasharp)",value:"ultrasharp"},{label:"Digital Art",value:"realesrgan-x4plus-anime"}];T.map(e=>e.value);let A=(0,p.cn)(T),F=(0,p.cn)([]);var M=a(6913),R=a.n(M),hooks_useLog=()=>{let e=(0,m.b9)(F);return{logit:(...t)=>{R().log(...t);let a=[...t].join(" ");e(e=>[...e,a])}}},H=a(70),G=a(9051);function ImageScaleSelect({scale:e,setScale:t,hideInfo:a}){let s=(0,m.Dv)(E);return(0,i.jsxs)("div",{className:`${s&&"opacity-50"}`,children:[(0,i.jsx)("div",{className:"flex flex-row gap-1",children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("p",{className:"text-sm",children:["Image Scale ",(0,i.jsxs)("span",{className:"text-xs",children:["(",e,"X)"]})]}),a&&parseInt(e)>=6&&(0,i.jsx)("p",{className:"badge badge-warning text-xs font-bold","data-tooltip-id":"tooltip","data-tooltip-content":"Anything above 5X may cause performance issues on some devices!",children:"!"})]}):(0,i.jsxs)("p",{className:"text-sm font-medium",children:["IMAGE SCALE (",e,"X) ",s&&"DISABLED"]})}),!a&&(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"Anything above 4X (except 16X Double Upscayl) only resizes the image and does not use AI upscaling."}),!a&&parseInt(e)>=6&&(0,i.jsx)("p",{className:"text-xs text-base-content/80 text-red-500",children:"This may cause performance issues on some devices!"}),(0,i.jsx)("input",{type:"range",min:"1",max:"16",placeholder:"Example: 1320",value:e,onChange:e=>{t(e.target.value.toString())},step:"1",className:"range range-primary mt-2",disabled:s})]})}var config_LeftPaneImageSteps=function({selectImageHandler:e,selectFolderHandler:t,handleModelChange:a,upscaylHandler:s,batchMode:o,setBatchMode:c,imagePath:d,doubleUpscayl:u,setDoubleUpscayl:p,dimensions:h,setSaveImageAs:x,model:S,setModel:w,setGpuId:y}){let{0:N,1:O}=(0,l.useState)({label:null,value:null}),C=(0,m.Dv)(A),[D,P]=(0,m.KO)(g);(0,m.Dv)(v);let[U,T]=(0,m.KO)(f),[F,M]=(0,m.KO)(b),R=(0,m.Dv)(j),[V,B]=l.useState(!1),[Y,Z]=(0,m.KO)(I),[K,z]=(0,m.KO)(E),{0:$,1:W}=(0,l.useState)(null),{0:J,1:X}=(0,l.useState)(null),{logit:q}=hooks_useLog(),{toast:Q}=(0,G.pm)(),outputHandler=async()=>{var e=await window.electron.invoke(n.SELECT_FOLDER);null!==e?(q("\uD83D\uDDC2 Setting Output Path: ",e),T(e)):T(null)};(0,l.useEffect)(()=>{if((0,k.themeChange)(!1),localStorage.getItem("saveImageAs")){let e=localStorage.getItem("saveImageAs");q("⚙️ Getting saveImageAs from localStorage: ",e),x(e)}else q("⚙️ Setting saveImageAs to png"),localStorage.setItem("saveImageAs","png");if(localStorage.getItem("model")){let e=JSON.parse(localStorage.getItem("model"));O(e),w(e.value),q("⚙️ Getting model from localStorage: ",JSON.stringify(e))}else O(C[0]),w(C[0].value),localStorage.setItem("model",JSON.stringify(C[0])),q("\uD83D\uDD00 Setting model to",C[0].value);if(localStorage.getItem("gpuId")){let e=localStorage.getItem("gpuId");y(e),q("⚙️ Getting gpuId from localStorage: ",e)}else localStorage.setItem("gpuId",""),q("⚙️ Setting gpuId to empty string")},[]),(0,l.useEffect)(()=>{q("\uD83D\uDD00 Setting model to",N.value)},[N]),(0,l.useEffect)(()=>{W(ee().width),X(ee().height)},[h.width,h.height,u,D]);let ee=(0,l.useCallback)(()=>{let e={width:h.width,height:h.height},t=parseInt(D)*parseInt(D),a=parseInt(D);if(u){if(K)e.width=Y,e.height=Math.round(Y*(h.height/h.width));else{let a=h.width*t,s=h.height*t;e.width=a,e.height=s}}else K?(e.width=Y,e.height=Math.round(Y*(h.height/h.width))):(e.width=h.width*a,e.height=h.height*a);return e},[h.width,h.height,u,D]);return(0,i.jsxs)("div",{className:"animate-step-in animate flex h-screen flex-col gap-7 overflow-y-auto overflow-x-hidden p-5",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",className:"toggle",defaultChecked:o,onClick:()=>{R||T(""),M(""),c(e=>!e)}}),(0,i.jsx)("p",{className:"mr-1 inline-block cursor-help text-sm","data-tooltip-id":"tooltip","data-tooltip-content":"This will let you Upscayl all files in a folder at once",children:"Batch Upscayl"})]}),(0,i.jsxs)("div",{className:"animate-step-in",children:[(0,i.jsx)("p",{className:"step-heading",children:"Step 1"}),(0,i.jsxs)("button",{className:"btn btn-primary",onClick:o?t:e,"data-tooltip-id":"tooltip","data-tooltip-content":d,children:["Select ",o?"Folder":"Image"]})]}),(0,i.jsxs)("div",{className:"animate-step-in group flex flex-col gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"step-heading",children:"Step 2"}),(0,i.jsx)("p",{className:"mb-2 text-sm",children:"Select Model"}),(0,i.jsx)(H.ZP,{onMenuOpen:()=>B(!0),onMenuClose:()=>B(!1),options:C,components:{IndicatorSeparator:()=>null,DropdownIndicator:()=>null},onChange:e=>{a(e),O({label:e.label,value:e.value})},className:(0,_.cn)("react-select-container transition-all group-hover:w-full group-active:w-full focus:w-full",V&&"!w-full"),classNamePrefix:"react-select",value:N})]}),!o&&(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("input",{type:"checkbox",className:"checkbox",checked:u,onChange:e=>{e.target.checked?p(!0):p(!1)}}),(0,i.jsx)("p",{className:"cursor-pointer text-sm",onClick:e=>{p(!u)},children:"Double Upscayl"}),(0,i.jsx)("button",{className:"badge badge-neutral badge-sm cursor-help","data-tooltip-id":"tooltip","data-tooltip-content":"Enable this option to run upscayl twice on an image. Note that this may cause a significant increase in processing time and possibly performance issues for scales greater than 4X.",children:"?"})]}),(0,i.jsx)(ImageScaleSelect,{scale:D,setScale:P,hideInfo:!0})]}),(0,i.jsxs)("div",{className:"animate-step-in",children:[(0,i.jsxs)("div",{className:"flex flex-col pb-2",children:[(0,i.jsxs)("div",{className:"step-heading flex items-center gap-2",children:[(0,i.jsx)("span",{className:"leading-none",children:"Step 3"}),r.APP_STORE_BUILD&&(0,i.jsx)("button",{className:"badge badge-outline badge-sm cursor-pointer",onClick:()=>alert("Due to MacOS App Store security restrictions, Upscayl requires you to select an output folder everytime you start it.\n\nTo avoid this, you can permanently save a default output folder in the Upscayl 'Settings' tab."),children:"?"})]}),!U&&r.APP_STORE_BUILD&&(0,i.jsx)("div",{className:"text-xs",children:(0,i.jsx)("span",{className:"rounded-btn bg-base-200 px-2 font-medium uppercase text-base-content/50",children:"Not selected"})})]}),!o&&!r.APP_STORE_BUILD&&(0,i.jsxs)("p",{className:"mb-2 text-sm",children:["Defaults to ",o?"Folder's":"Image's"," path"]}),(0,i.jsx)("button",{className:"btn btn-primary","data-tooltip-content":U,"data-tooltip-id":"tooltip",onClick:outputHandler,children:"Set Output Folder"})]}),(0,i.jsxs)("div",{className:"animate-step-in",children:[(0,i.jsx)("p",{className:"step-heading",children:"Step 4"}),h.width&&h.height&&(0,i.jsxs)("p",{className:"mb-2 text-sm",children:["Upscayl from"," ",(0,i.jsxs)("span",{className:"font-bold",children:[h.width,"x",h.height]})," ","to"," ",(0,i.jsxs)("span",{className:"font-bold",children:[ee().width,"x",ee().height]})]}),(0,i.jsx)("button",{className:"btn btn-secondary",onClick:F.length>0||!U?()=>Q({description:"Please select an output folder first"}):s,children:F.length>0?"Upscayling⏳":"Upscayl"})]}),(0,i.jsx)(L.u,{className:"z-[999] max-w-sm break-words !bg-secondary",id:"tooltip"})]})},components_Tabs=({selectedTab:e,setSelectedTab:t})=>(0,i.jsxs)("div",{className:"tabs-boxed tabs mx-auto mb-2",children:[(0,i.jsx)("a",{className:`tab ${0===e&&"tab-active"}`,onClick:()=>{t(0)},children:"Upscayl"}),(0,i.jsx)("a",{className:`tab ${1===e&&"tab-active"}`,onClick:()=>{t(1)},children:"Settings"})]});function ThemeSelect(){return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"UPSCAYL THEME"}),(0,i.jsx)("select",{"data-choose-theme":!0,className:"select-primary select",children:[{label:"upscayl",value:"upscayl"},{label:"light",value:"light"},{label:"dark",value:"dark"},{label:"cupcake",value:"cupcake"},{label:"bumblebee",value:"bumblebee"},{label:"emerald",value:"emerald"},{label:"corporate",value:"corporate"},{label:"synthwave",value:"synthwave"},{label:"retro",value:"retro"},{label:"cyberpunk",value:"cyberpunk"},{label:"valentine",value:"valentine"},{label:"halloween",value:"halloween"},{label:"garden",value:"garden"},{label:"forest",value:"forest"},{label:"aqua",value:"aqua"},{label:"lofi",value:"lofi"},{label:"pastel",value:"pastel"},{label:"fantasy",value:"fantasy"},{label:"wireframe",value:"wireframe"},{label:"black",value:"black"},{label:"luxury",value:"luxury"},{label:"dracula",value:"dracula"},{label:"cmyk",value:"cmyk"},{label:"autumn",value:"autumn"},{label:"business",value:"business"},{label:"acid",value:"acid"},{label:"lemonade",value:"lemonade"},{label:"night",value:"night"},{label:"coffee",value:"coffee"},{label:"winter",value:"winter"}].map(e=>(0,i.jsx)("option",{value:e.value,children:e.label.toLocaleUpperCase()},e.value))})]})}function SaveOutputFolderToggle(){let[e,t]=(0,m.KO)(f),[a,s]=(0,m.KO)(j);return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"SAVE OUTPUT FOLDER"}),(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"If enabled, the output folder will be remembered between sessions."}),(0,i.jsx)("p",{className:"font-mono text-sm",children:e}),(0,i.jsx)("input",{type:"checkbox",className:"toggle",checked:a,onClick:()=>{s(e=>(!0===e&&t(""),!e)),localStorage.setItem("rememberOutputFolder",JSON.stringify(!a))}})]})}function GpuIdInput({gpuId:e,handleGpuIdChange:t}){return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"GPU ID"}),(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"Please read the Upscayl Documentation for more information."}),"win"===window.electron.platform&&(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"Enable performance mode on Windows for better results."}),(0,i.jsx)("input",{type:"text",placeholder:"Type here",className:"input input-bordered w-full max-w-xs",value:e,onChange:t})]})}function CustomModelsFolderSelect({customModelsPath:e,setCustomModelsPath:t}){return(0,i.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"ADD CUSTOM MODELS"}),(0,i.jsxs)("p",{className:"text-xs text-base-content/80",children:["You can add your own models easily. For more details:"," ",(0,i.jsx)("a",{href:"https://github.com/upscayl/custom-models/blob/main/README.md",className:"underline link",target:"_blank",children:"Custom Models Repository"})]}),(0,i.jsx)("p",{className:"text-sm text-base-content/60",children:e}),(0,i.jsx)("button",{className:"btn-primary btn",onClick:async()=>{let e=await window.electron.invoke(n.SELECT_CUSTOM_MODEL_FOLDER);null!==e?(t(e),window.electron.send(n.GET_MODELS_LIST,e)):t("")},children:"Select Folder"})]})}function LogArea({copyOnClickHandler:e,isCopied:t,logData:a}){let s=l.useRef(null);return(0,l.useEffect)(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[a]),(0,i.jsxs)("div",{className:"relative flex flex-col gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"LOGS"}),(0,i.jsx)("button",{className:"btn btn-primary btn-xs",onClick:e,children:t?(0,i.jsx)("span",{children:"COPIED ✅"}):(0,i.jsx)("span",{children:"COPY LOGS \uD83D\uDCCB"})})]}),(0,i.jsxs)("code",{className:"rounded-btn relative flex h-52 max-h-52 flex-col gap-3 overflow-y-auto break-all rounded-r-none bg-base-200 p-4 text-xs",ref:s,children:[0===a.length&&(0,i.jsx)("p",{className:"text-base-content/70",children:"No logs to show"}),a.map(e=>(0,i.jsx)("p",{className:"",children:e}))]})]})}function ImageFormatSelect({batchMode:e,saveImageAs:t,setExportType:a}){return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("div",{className:"flex flex-row gap-1",children:(0,i.jsx)("p",{className:"text-sm font-medium",children:"SAVE IMAGE AS"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[e&&(0,i.jsx)("p",{className:"text-xs text-base-content/80"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsx)("button",{className:`btn ${"png"===t&&"btn-primary"}`,onClick:()=>a("png"),children:"PNG"}),(0,i.jsx)("button",{className:`btn ${"jpg"===t&&"btn-primary"}`,onClick:()=>a("jpg"),children:"JPG"}),(0,i.jsx)("button",{className:`btn ${"webp"===t&&"btn-primary"}`,onClick:()=>a("webp"),children:"WEBP"})]})]})]})}function DonateButton({}){return(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-sm font-medium",children:[(0,i.jsx)("p",{children:"If you like what we do :)"}),(0,i.jsx)("a",{href:"https://buymeacoffee.com/fossisthefuture",target:"_blank",className:"btn btn-primary",children:"\uD83D\uDC8E DONATE"})]})}function CompressionInput({compression:e,handleCompressionChange:t}){return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("div",{className:"flex gap-1 text-sm font-medium uppercase",children:(0,i.jsxs)("p",{className:"shrink-0",children:["Image Compression (",e,"%)"]})}),e>0&&(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"PNG compression is lossless, so it might not reduce the file size significantly and higher compression values might affect the performance. JPG and WebP compression is lossy."}),(0,i.jsx)("input",{type:"range",placeholder:"Type here",className:"range range-primary w-full max-w-xs",min:0,max:100,value:e,onChange:t})]})}var settings_tab_OverwriteToggle=()=>{let[e,t]=(0,m.KO)(y);return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"OVERWRITE PREVIOUS UPSCALE"}),(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"If enabled, Upscayl will process the image again instead of loading it directly."}),(0,i.jsx)("input",{type:"checkbox",className:"toggle",checked:e,onClick:()=>{t(e=>!e||(localStorage.removeItem("overwrite"),!1)),localStorage.setItem("overwrite",JSON.stringify(!e))}})]})},V=a(5353),B=a(7004);let Y=(0,V.ZF)({apiKey:"AIzaSyBwD3AM0XKRsHnA0YU-CKTSSD4xcfDu9wU",authDomain:"upscayl.firebaseapp.com",projectId:"upscayl",storageBucket:"upscayl.appspot.com",messagingSenderId:"1096660154086",appId:"1:1096660154086:web:ec1872e9ceb11dad686d27"}),Z=(0,B.ad)(Y),K=(0,B.hJ)(Z,"waitlist"),z=/^[A-Za-z\s.'-]+$/,$=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,UpscaylCloudModal=({show:e,setShow:t,setDontShowCloudModal:a})=>{let{0:s,1:n}=(0,l.useState)(""),{0:o,1:r}=(0,l.useState)("");return(0,i.jsxs)("dialog",{className:`modal ${e&&"modal-open"}`,children:[(0,i.jsxs)("div",{className:"modal-box flex flex-col text-center items-center gap-4",children:[(0,i.jsx)("button",{className:"absolute top-2 right-4 btn btn-circle",onClick:()=>t(!1),children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,i.jsx)("rect",{x:"0",y:"0",width:"24",height:"24",fill:"none",stroke:"none"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5",d:"m8.464 15.535l7.072-7.07m-7.072 0l7.072 7.07"})]})}),(0,i.jsx)("p",{className:"badge badge-neutral text-xs",children:"Coming soon!"}),(0,i.jsx)("p",{className:"text-2xl font-semibold",children:"Introducing Upscayl Cloud!"}),(0,i.jsx)("p",{className:"w-9/12 font-medium text-lg",children:"No more errors, hardware issues, quality compromises or long loading times!"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-start",children:[(0,i.jsx)("p",{children:"\uD83C\uDF10 Upscayl anywhere, anytime, any device"}),(0,i.jsx)("p",{children:"☁️ No Graphics Card or hardware required"}),(0,i.jsx)("p",{children:"\uD83D\uDC69 Face Enhancement"}),(0,i.jsx)("p",{children:"\uD83E\uDD8B 10+ models to choose from"}),(0,i.jsx)("p",{children:"\uD83C\uDFCE 5x faster than Upscayl Desktop"}),(0,i.jsx)("p",{children:"\uD83C\uDF9E Video Upscaling"}),(0,i.jsx)("p",{children:"\uD83D\uDCB0 Commercial Usage"}),(0,i.jsx)("p",{children:"\uD83D\uDE34 Upscayl while you sleep"})]}),(0,i.jsxs)("form",{className:"flex flex-col items-center gap-3",onSubmit:async e=>{if(e.preventDefault(),s&&o&&z.test(s)&&$.test(o)){try{await (0,B.pl)((0,B.JU)(K,o),{name:s,email:o})}catch(e){alert(`Thank you ${s}! It seems that your email has already been registered :D If that's not the case, please try again.`);return}n(""),r(""),a(!0),t(!1),alert("Thank you for joining the waitlist! We will notify you when Upscayl Cloud is ready for you.")}else alert("Please fill in all the fields correctly.")},children:[(0,i.jsxs)("div",{className:"gap-2 grid grid-cols-2",children:[(0,i.jsx)("input",{type:"text",className:"input input-bordered",placeholder:"Name",value:s,onChange:e=>n(e.target.value)}),(0,i.jsx)("input",{type:"email",className:"input input-bordered",placeholder:"Email",value:o,onChange:e=>r(e.target.value)})]}),(0,i.jsx)("button",{type:"submit",className:"bg-success text-success-content rounded-2xl px-4 py-2",children:"Join the waitlist"}),(0,i.jsx)("button",{className:"text-xs text-base-content/50",onClick:()=>{a(!0),t(!1)},type:"button",children:"DON'T SHOW AGAIN"})]})]}),(0,i.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,i.jsx)("button",{onClick:()=>t(!1),children:"close"})})]})};function ResetSettings(){return(0,i.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"RESET UPSCAYL"}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:async()=>{localStorage.clear(),alert("Upscayl has been reset. Please restart the app.")},children:"RESET UPSCAYL"})]})}var settings_tab_TurnOffNotificationsToggle=()=>{let[e,t]=(0,m.KO)(N);return(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"TURN OFF NOTIFICATIONS"}),(0,i.jsx)("p",{className:"text-xs text-base-content/80",children:"If enabled, Upscayl will not send any system notifications on success or failure."}),(0,i.jsx)("input",{type:"checkbox",className:"toggle",checked:e,onClick:()=>{t(!e)}})]})};function CustomResolutionInput(){let[e,t]=(0,m.KO)(E),[a,s]=(0,m.KO)(I);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"CUSTOM OUTPUT WIDTH"}),(0,i.jsxs)("p",{className:"text-xs text-base-content/80",children:[(0,i.jsx)("b",{children:"REQUIRES RESTART"}),(0,i.jsx)("br",{}),"Use a custom width for the output images. The height will be adjusted automatically. Enabling this will override the scale setting."]})]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",className:"toggle",checked:e,onClick:a=>{a.currentTarget.checked||localStorage.removeItem("customWidth"),t(!e)}}),(0,i.jsx)("input",{type:"number",value:a,disabled:!e,onChange:e=>{if(""===e.currentTarget.value){t(!1),s(null),localStorage.removeItem("customWidth");return}s(parseInt(e.currentTarget.value))},step:"1",min:"1",className:"input input-primary h-7 w-32 [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"})]})]})}function TileSizeInput(){let[e,t]=(0,m.KO)(D);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:"CUSTOM TILE SIZE"}),(0,i.jsxs)("p",{className:"text-xs text-base-content/80",children:[(0,i.jsx)("br",{}),"Use a custom tile size for segmenting the image. This can help process images faster by reducing the number of tiles generated."]})]}),(0,i.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,i.jsx)("input",{type:"number",value:e,onChange:e=>{if(""===e.currentTarget.value){t(null),localStorage.removeItem("customWidth");return}t(parseInt(e.currentTarget.value))},placeholder:"0 = Auto",className:"input input-primary [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"})})]})}var settings_tab=function({batchMode:e,setModel:t,compression:a,setCompression:s,gpuId:n,setGpuId:o,saveImageAs:c,setSaveImageAs:d,logData:u,os:p,show:x,setShow:f,setDontShowCloudModal:b}){let{0:j,1:S}=(0,l.useState)({label:null,value:null}),{0:v,1:w}=(0,l.useState)(!1),[y,N]=(0,m.KO)(h),O=(0,m.Dv)(A),[C,I]=(0,m.KO)(g),{0:E,1:D}=(0,l.useState)(!0),{0:P,1:U}=(0,l.useState)(null),{logit:L}=hooks_useLog();(0,l.useEffect)(()=>{if((0,k.themeChange)(!1),localStorage.getItem("saveImageAs")){let e=localStorage.getItem("saveImageAs");L("⚙️ Getting saveImageAs from localStorage: ",e),d(e)}else L("⚙️ Setting saveImageAs to png"),localStorage.setItem("saveImageAs","png");if(localStorage.getItem("model")){let e=JSON.parse(localStorage.getItem("model"));void 0===O.find(t=>t.value===e.value)&&(localStorage.setItem("model",JSON.stringify(O[0])),L("\uD83D\uDD00 Setting model to",O[0].value),e=O[0]),S(e),t(e.value),L("⚙️ Getting model from localStorage: ",JSON.stringify(e))}else S(O[0]),t(O[0].value),localStorage.setItem("model",JSON.stringify(O[0])),L("\uD83D\uDD00 Setting model to",O[0].value);if(localStorage.getItem("gpuId")){let e=localStorage.getItem("gpuId");o(e),L("⚙️ Getting gpuId from localStorage: ",e)}else localStorage.setItem("gpuId",""),L("⚙️ Setting gpuId to empty string")},[]);let T=navigator?.userAgent?.match(/Upscayl\/([\d\.]+\d+)/)[1];return(0,i.jsxs)("div",{className:(0,_.cn)("animate-step-in animate z-50 flex h-screen flex-col gap-7 overflow-y-auto overflow-x-hidden p-5",E?"":"hide-scrollbar"),onScroll:()=>{E&&(null!==P&&clearTimeout(P),U(setTimeout(function(){D(!1)},1e3)))},onWheel:()=>{null!==P&&clearTimeout(P),D(!0)},children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-sm font-medium uppercase",children:[(0,i.jsx)("p",{children:"Having issues?"}),(0,i.jsx)("a",{className:"btn btn-primary",href:"https://docs.upscayl.org/",target:"_blank",children:"\uD83D\uDE4F GET HELP"}),r.APP_STORE_BUILD&&(0,i.jsx)("a",{className:"btn btn-primary",href:`mailto:upscayl@gmail.com?subject=Upscayl%20Issue%3A%20%3CIssue%20name%20here%3E&body=Device%20Name%3A%20%3CYOUR%20DEVICE%20MODEL%3E%0AOperating%20System%3A%20%3CYOUR%20OPERATING%20SYSTEM%20VERSION%3E%0AUpscayl%20Version%3A%20${T}%0A%0AHi%2C%20I'm%20having%20an%20issue%20with%20Upscayl.%20%3CDESCRIBE%20ISSUE%20HERE%3E`,target:"_blank",children:"\uD83D\uDCE7 EMAIL DEVELOPER"}),!r.APP_STORE_BUILD&&(0,i.jsx)(DonateButton,{})]}),(0,i.jsx)(LogArea,{copyOnClickHandler:()=>{navigator.clipboard.writeText(u.join("\n")),w(!0),setTimeout(()=>{w(!1)},2e3)},isCopied:v,logData:u}),(0,i.jsx)(ThemeSelect,{}),(0,i.jsx)(ImageFormatSelect,{batchMode:e,saveImageAs:c,setExportType:e=>{d(e),localStorage.setItem("saveImageAs",e)}}),(0,i.jsx)(ImageScaleSelect,{scale:C,setScale:I}),(0,i.jsx)(CustomResolutionInput,{}),(0,i.jsx)(CompressionInput,{compression:a,handleCompressionChange:e=>{s(e.target.value)}}),(0,i.jsx)(SaveOutputFolderToggle,{}),(0,i.jsx)(settings_tab_OverwriteToggle,{}),(0,i.jsx)(settings_tab_TurnOffNotificationsToggle,{}),(0,i.jsx)(GpuIdInput,{gpuId:n,handleGpuIdChange:e=>{o(e.target.value),localStorage.setItem("gpuId",e.target.value)}}),(0,i.jsx)(TileSizeInput,{}),(0,i.jsx)(CustomModelsFolderSelect,{customModelsPath:y,setCustomModelsPath:N}),(0,i.jsx)(ResetSettings,{}),r.SHOW_UPSCAYL_CLOUD_INFO&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"mx-5 mb-5 animate-pulse rounded-btn bg-success p-1 text-sm text-slate-50 shadow-lg shadow-success/40",onClick:()=>{f(!0)},children:"Introducing Upscayl Cloud"}),(0,i.jsx)(UpscaylCloudModal,{show:x,setShow:f,setDontShowCloudModal:b})]})]})},W=a(7240),J=a(8431);let NewsModal=({show:e,setShow:t,news:a})=>(0,i.jsxs)("dialog",{className:`modal ${e&&"modal-open"}`,children:[(0,i.jsxs)("div",{className:"modal-box flex flex-col text-center items-center gap-4",children:[(0,i.jsx)("button",{className:"absolute top-2 right-4 btn btn-circle",onClick:()=>t(!1),children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,i.jsx)("rect",{x:"0",y:"0",width:"24",height:"24",fill:"none",stroke:"none"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5",d:"m8.464 15.535l7.072-7.07m-7.072 0l7.072 7.07"})]})}),(0,i.jsx)("div",{children:a&&(0,i.jsx)(W.U,{remarkPlugins:[J.Z],className:"prose",children:a.content})})]}),(0,i.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,i.jsx)("button",{onClick:()=>t(!1),children:"close"})})]});var X=a(7609),q=a.n(X),Q=a(8543),ee=a(5894),et=a(7740);function sanitizePath(e){let t=e.replace(/\\/g,"/"),a=t.split("/"),s=a.map(e=>encodeURIComponent(e)),l=s.join("/");return l}function getDirectoryFromPath(e){let t=e.includes("/")?"/":"\\",a=e.split(t);a.pop();let s=a.join(t);return s||""}function pages_ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function pages_objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pages_ownKeys(Object(a),!0).forEach(function(t){(0,s.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pages_ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var pages=()=>{let e=["png","jpg","jpeg","webp"],{0:t,1:a}=(0,l.useState)(void 0),{0:s,1:c}=(0,l.useState)(""),{0:p,1:h}=(0,l.useState)(""),{0:N,1:U}=(0,l.useState)("realesrgan-x4plus"),{0:L,1:k}=(0,l.useState)(""),{0:T,1:M}=(0,l.useState)(""),{0:R,1:H}=(0,l.useState)(!1),V=(0,m.Dv)(y),{0:B,1:Y}=(0,l.useState)(""),{0:Z,1:K}=(0,l.useState)(0),{0:z,1:$}=(0,l.useState)(""),{0:W,1:J}=(0,l.useState)("png"),{0:X,1:ea}=(0,l.useState)("100"),{0:es,1:el}=(0,l.useState)("0% 0%"),{0:en,1:eo}=(0,l.useState)({width:null,height:null}),{0:er,1:ei}=(0,l.useState)(0),{0:ec,1:ed}=(0,l.useState)(!0),{0:eu,1:em}=(0,l.useState)(!1),{0:ep,1:eh}=(0,l.useState)(22),{0:eg,1:ex}=(0,l.useState)({x:0,y:0}),[ef,eb]=(0,m.KO)(f),[ej,eS]=(0,m.KO)(w),[ev,ew]=(0,m.KO)(b),[ey,eN]=(0,m.KO)(x),[eO,eC]=(0,m.KO)(F),[eI,eE]=(0,m.KO)(A),[eD]=(0,m.KO)(g),[eP,e_]=(0,m.KO)(S),eU=(0,m.Dv)(v),[eL,ek]=(0,m.KO)(u),[eT,eA]=(0,m.KO)(d),eF=(0,m.Dv)(O),eM=(0,m.Dv)(C),eR=(0,m.Dv)(j),[eH,eG]=(0,m.KO)(P),eV=(0,m.Dv)(I),eB=(0,m.Dv)(E),eY=(0,m.Dv)(D),{logit:eZ}=hooks_useLog(),{toast:eK}=(0,G.pm)(),ez=(0,l.useMemo)(()=>sanitizePath(s),[s]),e$=(0,l.useMemo)(()=>sanitizePath(p),[p]);(0,l.useEffect)(()=>{let e=navigator?.userAgent?.match(/Upscayl\/([\d\.]+\d+)/)[1];k(e)},[]),(0,l.useEffect)(()=>{let handleErrors=e=>{if(e.includes("Invalid GPU"))eK({title:"GPU Error",description:`Ran into an issue with the GPU. Please read the docs for troubleshooting! (${e})`,action:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(et.gD,{altText:"Copy Error",onClick:()=>{navigator.clipboard.writeText(e)},children:"Copy Error"}),(0,i.jsx)("a",{href:"https://docs.upscayl.org/",target:"_blank",children:(0,i.jsx)(et.gD,{altText:"Open Docs",children:"Troubleshoot"})})]})}),resetImagePaths();else if(e.includes("write")||e.includes("read")){if(ey)return;eK({title:"Read/Write Error",description:`Make sure that the path is correct and you have proper read/write permissions 
(${e})`,action:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(et.gD,{altText:"Copy Error",onClick:()=>{navigator.clipboard.writeText(e)},children:"Copy Error"}),(0,i.jsx)("a",{href:"https://docs.upscayl.org/",target:"_blank",children:(0,i.jsx)(et.gD,{altText:"Open Docs",children:"Troubleshoot"})})]})}),resetImagePaths()}else e.includes("tile size")?(eK({title:"Error",description:`The tile size is wrong. Please change the tile size in the settings or set to 0 (${e})`}),resetImagePaths()):e.includes("uncaughtException")&&(eK({title:"Exception Error",description:"Upscayl encountered an error. Possibly, the upscayl binary failed to execute the commands properly. Try checking the logs to see if you get any information. You can post an issue on Upscayl's GitHub repository for more help."}),resetImagePaths())};window.electron.on(n.OS,(e,t)=>{t&&a(t)}),window.electron.on(n.LOG,(e,t)=>{eZ(`🎒 BACKEND REPORTED: `,t)}),window.electron.on(n.SCALING_AND_CONVERTING,(e,t)=>{ew("Processing the image...")}),window.electron.on(n.UPSCAYL_ERROR,(e,t)=>{eK({title:"Error",description:t}),resetImagePaths()}),window.electron.on(n.UPSCAYL_PROGRESS,(e,t)=>{t.length>0&&t.length<10?ew(t):t.includes("converting")?ew("Scaling and converting image..."):t.includes("Successful")&&ew("Upscayl Successful!"),handleErrors(t),eZ(`🚧 UPSCAYL_PROGRESS: `,t)}),window.electron.on(n.FOLDER_UPSCAYL_PROGRESS,(e,t)=>{t.includes("Successful")&&ew("Upscayl Successful!"),t.length>0&&t.length<10&&ew(t),handleErrors(t),eZ(`🚧 FOLDER_UPSCAYL_PROGRESS: `,t)}),window.electron.on(n.DOUBLE_UPSCAYL_PROGRESS,(e,t)=>{t.length>0&&t.length<10&&("0.00%"===t&&K(Z+1),ew(t)),handleErrors(t),eZ(`🚧 DOUBLE_UPSCAYL_PROGRESS: `,t)}),window.electron.on(n.UPSCAYL_DONE,(e,t)=>{ew(""),h(t),eZ("upscaledImagePath: ",t),eZ(`💯 UPSCAYL_DONE: `,t)}),window.electron.on(n.FOLDER_UPSCAYL_DONE,(e,t)=>{ew(""),Y(t),eZ(`💯 FOLDER_UPSCAYL_DONE: `,t)}),window.electron.on(n.DOUBLE_UPSCAYL_DONE,(e,t)=>{ew(""),setTimeout(()=>h(t),500),K(0),eZ(`💯 DOUBLE_UPSCAYL_DONE: `,t)}),window.electron.on(n.CUSTOM_MODEL_FILES_LIST,(e,t)=>{eZ(`📜 CUSTOM_MODEL_FILES_LIST: `,t);let a=t.map(e=>({value:e,label:e})),s=[...eI,...a],l=s.filter((e,t,a)=>a.findIndex(t=>t.value===e.value)===t);eE(l)})},[]),(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("customModelsPath"));null!==e&&(window.electron.send(n.GET_MODELS_LIST,e),eZ("\uD83C\uDFAF GET_MODELS_LIST: ",e))},[]),(0,l.useEffect)(()=>{if(!window||!1!==window.navigator.onLine)try{fetch("https://raw.githubusercontent.com/upscayl/upscayl/main/news.md",{cache:"no-cache"}).then(e=>e.text()).then(e=>{if(!e){console.log("\uD83D\uDCF0 Could not fetch news data");return}let t=q()(e);if(t){if(t&&t.data.dontShow)return;t&&eL&&t?.data?.version===eL?.data?.version?(console.log("\uD83D\uDCF0 News is up to date"),!1===eT&&eA(!1)):t&&(ek(q()(e)),eA(!0))}})}catch(e){console.log("Could not fetch Upscayl News")}},[eL]),(0,l.useEffect)(()=>{ed(!1)},[]);let resetImagePaths=()=>{eZ("\uD83D\uDD04 Resetting image paths"),eo({width:null,height:null}),ew(""),c(""),h(""),M(""),Y("")},validateImagePath=t=>{if(t.length>0){eZ("\uD83D\uDDBC imagePath: ",t);let a=t.toLocaleLowerCase().split(".").pop();eZ("\uD83D\uDD24 Extension: ",a),e.includes(a.toLowerCase())||(eK({title:"Invalid Image",description:"Please select an image with a valid extension like PNG, JPG, JPEG, or WEBP."}),resetImagePaths())}else resetImagePaths()},eW=(0,l.useCallback)(e=>{let{left:t,top:a,width:s,height:l}=e.target.getBoundingClientRect(),n=(e.pageX-t)/s*100,o=(e.pageY-a)/l*100;el(`${n}% ${o}%`)},[]),selectImageHandler=async()=>{resetImagePaths();var e=await window.electron.invoke(n.SELECT_FILE);if(null!==e){eZ("\uD83D\uDDBC Selected Image Path: ",e),c(e);var t=getDirectoryFromPath(e);eZ("\uD83D\uDCC1 Selected Image Directory: ",t),r.APP_STORE_BUILD||eR||eb(t),validateImagePath(e)}},selectFolderHandler=async()=>{resetImagePaths();var e=await window.electron.invoke(n.SELECT_FOLDER);null!==e?(eZ("\uD83D\uDDBC Selected Folder Path: ",e),M(e),eR||eb(e)):(eZ("\uD83D\uDEAB Folder selection cancelled"),M(""),eR||eb(""))},handleDragEnter=e=>{e.preventDefault(),console.log("drag enter")},handleDragLeave=e=>{e.preventDefault(),console.log("drag leave")},handleDragOver=e=>{e.preventDefault(),console.log("drag over")},handleDrop=t=>{if(t.preventDefault(),resetImagePaths(),0===t.dataTransfer.items.length||0===t.dataTransfer.files.length){eZ("\uD83D\uDC4E No valid files dropped"),eK({title:"Invalid Image",description:"Please drag and drop an image"});return}let a=t.dataTransfer.items[0].type,s=t.dataTransfer.files[0].path,l=t.dataTransfer.files[0].name.split(".").at(-1);if(eZ("⤵️ Dropped file: ",JSON.stringify({type:a,filePath:s,extension:l})),a.includes("image")&&e.includes(l.toLowerCase())){eZ("\uD83D\uDDBC Setting image path: ",s),c(s);var n=getDirectoryFromPath(s);eZ("\uD83D\uDDC2 Setting output path: ",n),r.APP_STORE_BUILD||eR||eb(n),validateImagePath(s)}else eZ("\uD83D\uDEAB Invalid file dropped"),eK({title:"Invalid Image",description:"Please drag and drop an image"})},handlePaste=t=>{resetImagePaths(),t.preventDefault();let a=t.clipboardData.items[0].type,s=t.clipboardData.files[0].path,l=t.clipboardData.files[0].name.split(".").at(-1);if(eZ("\uD83D\uDCCB Pasted file: ",JSON.stringify({type:a,filePath:s,extension:l})),a.includes("image")||e.includes(l.toLowerCase())){c(s);var n=getDirectoryFromPath(s);eZ("\uD83D\uDDC2 Setting output path: ",n),eR||eb(n)}else eK({title:"Invalid Image",description:"Please drag and drop an image"})},upscaylHandler=async()=>{eZ("\uD83D\uDD04 Resetting Upscaled Image Path"),h(""),Y(""),""!==s||""!==T?(ew("Hold on..."),R?(window.electron.send(n.DOUBLE_UPSCAYL,{imagePath:s,outputPath:ef,model:N,gpuId:0===z.length?null:z,saveImageAs:W,scale:eD,noImageProcessing:eU,compression:ej.toString(),customWidth:eV>0?eV.toString():null,useCustomWidth:eB,tileSize:eY}),eZ("\uD83C\uDFC1 DOUBLE_UPSCAYL")):ey?(H(!1),window.electron.send(n.FOLDER_UPSCAYL,{batchFolderPath:T,outputPath:ef,model:N,gpuId:0===z.length?null:z,saveImageAs:W,scale:eD,noImageProcessing:eU,compression:ej.toString(),customWidth:eV>0?eV.toString():null,useCustomWidth:eB,tileSize:eY}),eZ("\uD83C\uDFC1 FOLDER_UPSCAYL")):(window.electron.send(n.UPSCAYL,{imagePath:s,outputPath:ef,model:N,gpuId:0===z.length?null:z,saveImageAs:W,scale:eD,overwrite:V,noImageProcessing:eU,compression:ej.toString(),customWidth:eV>0?eV.toString():null,useCustomWidth:eB,tileSize:eY}),eZ("\uD83C\uDFC1 UPSCAYL"))):(eK({title:"No image selected",description:"Please select an image to upscale"}),eZ("\uD83D\uDEAB No valid image selected"))};return ec?(0,i.jsx)(icons_Logo,{className:"absolute left-1/2 top-1/2 w-36 -translate-x-1/2 -translate-y-1/2 animate-pulse"}):(0,i.jsxs)("div",{className:"flex h-screen w-screen flex-row overflow-hidden bg-base-300",children:[!eH&&(0,i.jsxs)("div",{className:"fixed right-2 top-2 z-50 flex items-center justify-center gap-2 rounded-[7px] bg-base-300 px-2 py-1 font-medium text-base-content ",children:[(0,i.jsx)(icons_Logo,{className:"w-5"}),"Upscayl"]}),(0,i.jsx)("button",{className:(0,_.cn)("fixed left-0 top-1/2 z-[999] -translate-y-1/2 rounded-r-full bg-base-100 p-4 ",eH?"hidden":""),onClick:()=>eG(e=>!e),children:(0,i.jsx)(Q.Z,{})}),(0,i.jsxs)("div",{className:`relative flex h-screen min-w-[350px] max-w-[350px] flex-col bg-base-100 ${eH?"":"hidden"}`,children:[(0,i.jsx)("button",{className:"absolute -right-0 top-1/2 z-[999] -translate-y-1/2 translate-x-1/2 rounded-full bg-base-100 p-4",onClick:()=>eG(e=>!e),children:(0,i.jsx)(ee.Z,{})}),r.SHOW_UPSCAYL_CLOUD_INFO&&(0,i.jsx)(UpscaylCloudModal,{show:eu,setShow:em,setDontShowCloudModal:e_}),"mac"===window.electron.platform&&(0,i.jsx)("div",{className:"mac-titlebar pt-8"}),(0,i.jsx)(Header,{version:L}),!eP&&r.SHOW_UPSCAYL_CLOUD_INFO&&(0,i.jsx)("button",{className:"mx-5 mb-5 animate-pulse rounded-btn bg-success p-1 text-sm text-slate-50 shadow-lg shadow-success/40",onClick:()=>{em(!0)},children:"Introducing Upscayl Cloud"}),(0,i.jsx)(NewsModal,{show:eT,setShow:e=>{eA(e),ek(e=>pages_objectSpread(pages_objectSpread({},e),{},{seen:!0}))},news:eL}),(0,i.jsx)(components_Tabs,{selectedTab:er,setSelectedTab:ei}),0===er&&(0,i.jsx)(config_LeftPaneImageSteps,{selectImageHandler:selectImageHandler,selectFolderHandler:selectFolderHandler,handleModelChange:e=>{U(e.value),eZ("\uD83D\uDD00 Model changed: ",e.value),localStorage.setItem("model",JSON.stringify({label:e.label,value:e.value}))},upscaylHandler:upscaylHandler,batchMode:ey,setBatchMode:eN,imagePath:s,doubleUpscayl:R,setDoubleUpscayl:H,dimensions:en,setGpuId:$,model:N,setModel:U,setSaveImageAs:J}),1===er&&(0,i.jsx)(settings_tab,{batchMode:ey,setModel:U,compression:ej,setCompression:eS,gpuId:z,setGpuId:$,saveImageAs:W,setSaveImageAs:J,logData:eO,os:t,show:eu,setShow:em,setDontShowCloudModal:e_}),(0,i.jsx)(components_Footer,{})]}),(0,i.jsxs)("div",{className:"relative flex h-screen w-full flex-col items-center justify-center",onDrop:e=>handleDrop(e),onDragOver:e=>handleDragOver(e),onDragEnter:e=>handleDragEnter(e),onDragLeave:e=>handleDragLeave(e),onDoubleClick:()=>{ey?selectFolderHandler():selectImageHandler()},onPaste:e=>handlePaste(e),children:["mac"===window.electron.platform&&(0,i.jsx)("div",{className:"mac-titlebar absolute top-0 h-8 w-full"}),ev.length>0&&0===p.length&&0===B.length?(0,i.jsx)(view_ProgressBar,{batchMode:ey,progress:ev,doubleUpscaylCounter:Z,stopHandler:()=>{window.electron.send(n.STOP),eZ("\uD83D\uDED1 Stopping Upscayl"),resetImagePaths()}}):null,(!ey&&0===s.length&&0===p.length||ey&&0===T.length&&0===B.length)&&(0,i.jsx)(view_RightPaneInfo,{version:L,batchMode:ey}),!ey&&0===p.length&&s.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(view_ImageOptions,{zoomAmount:X,setZoomAmount:ea,resetImagePaths:resetImagePaths,hideZoomOptions:!0}),(0,i.jsx)("img",{src:"file:///"+sanitizePath(s),onLoad:e=>{eo({width:e.target.naturalWidth,height:e.target.naturalHeight})},draggable:"false",alt:"",className:"h-full w-full bg-gradient-to-br from-base-300 to-base-100 object-contain"})]}),ey&&0===B.length&&T.length>0&&(0,i.jsxs)("p",{className:"select-none text-base-content",children:[(0,i.jsx)("span",{className:"font-bold",children:"Selected folder:"})," ",T]}),ey&&B.length>0&&(0,i.jsxs)("div",{className:"z-50 flex flex-col items-center",children:[(0,i.jsx)("p",{className:"select-none py-4 font-bold text-base-content",children:"All done!"}),(0,i.jsx)("button",{className:"bg-gradient-blue btn btn-primary rounded-btn p-3 font-medium text-white/90 transition-colors",onClick:e=>{eZ("\uD83D\uDCC2 OPEN_FOLDER: ",B),window.electron.send(n.OPEN_FOLDER,B)},children:"Open Upscayled Folder"})]}),(0,i.jsx)(view_ImageOptions,{zoomAmount:X,setZoomAmount:ea,resetImagePaths:resetImagePaths}),!ey&&"lens"===eF&&p&&s&&(0,i.jsxs)("div",{className:"group relative h-full w-full overflow-hidden",onMouseMove:e=>{let{left:t,top:a,height:s,width:l}=e.currentTarget.getBoundingClientRect(),n=e.clientX-t,o=e.clientY-a;ex({x:n,y:o});let r=(e.pageX-t)/l*100,i=(e.pageY-a)/s*100;el(`${r}% ${i}%`)},children:[(0,i.jsx)("img",{className:`absolute left-0 top-0 h-full w-full object-contain transition-transform group-hover:scale-[${X+"%"}]`,src:"file:///"+s,style:{backgroundPosition:"0% 0%",transformOrigin:es}}),(0,i.jsx)("div",{className:`invisible absolute left-0 top-0 h-full w-full bg-white mix-blend-difference group-hover:visible group-hover:scale-[${X+"%"}]`,style:{clipPath:`circle(${(eM+2*(parseInt(X)/100))/(parseInt(X)/100)}px at ${eg.x}px ${eg.y}px)`,backgroundPosition:"0% 0%",transformOrigin:es}}),(0,i.jsx)("img",{className:`absolute h-full w-full object-contain transition-transform group-hover:scale-[${X+"%"}]`,src:"file:///"+p,style:{clipPath:`circle(${(eM+parseInt(X)/100)/(parseInt(X)/100)}px at ${eg.x}px ${eg.y}px)`,backgroundPosition:es,transformOrigin:es}})]}),!ey&&"slider"===eF&&s.length>0&&p.length>0&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.vx,{itemOne:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"absolute bottom-1 left-1 rounded-md bg-black p-1 text-sm font-medium text-white opacity-30",children:"Original"}),(0,i.jsx)("img",{src:"file:///"+ez,alt:"Original",onMouseMove:eW,style:{objectFit:"contain",backgroundPosition:"0% 0%",transformOrigin:es},className:`h-full w-full bg-gradient-to-br from-base-300 to-base-100 transition-transform group-hover:scale-[${X}%]`})]}),itemTwo:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"absolute bottom-1 right-1 rounded-md bg-black p-1 text-sm font-medium text-white opacity-30",children:"Upscayled"}),(0,i.jsx)("img",{src:"file:///"+e$,alt:"Upscayl",style:{objectFit:"contain",backgroundPosition:"0% 0%",transformOrigin:es},onMouseMove:eW,className:`h-full w-full bg-gradient-to-br from-base-300 to-base-100 transition-transform group-hover:scale-[${X||"100%"}%]`})]}),className:"group h-screen"})})]})]})}},9536:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1105)}])},4325:function(){}},function(e){e.O(0,[730,501,959,774,888,179],function(){return e(e.s=9536)}),_N_E=e.O()}]);