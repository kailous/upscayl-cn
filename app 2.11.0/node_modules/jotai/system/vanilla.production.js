System.register([],function(z){"use strict";return{execute:function(){z("atom",N);let L=0;function N(s,a){const h=`atom${++L}`,v={toString:()=>h};return typeof s=="function"?v.read=s:(v.init=s,v.read=function(m){return m(this)},v.write=function(m,A,w){return A(this,typeof w=="function"?w(m(this)):w)}),a&&(v.write=a),v}const O=s=>"init"in s,C=s=>!!s.write,y=new WeakMap,R=(s,a)=>{y.set(s,a),s.catch(()=>{}).finally(()=>y.delete(s))},q=(s,a)=>{const h=y.get(s);h&&(y.delete(s),h(a))},B=(s,a)=>{s.status="fulfilled",s.value=a},F=(s,a)=>{s.status="rejected",s.reason=a},T=s=>typeof(s==null?void 0:s.then)=="function",S=(s,a)=>!!s&&"v"in s&&"v"in a&&Object.is(s.v,a.v),G=(s,a)=>!!s&&"e"in s&&"e"in a&&Object.is(s.e,a.e),E=s=>!!s&&"v"in s&&s.v instanceof Promise,U=(s,a)=>"v"in s&&"v"in a&&s.v.orig&&s.v.orig===a.v.orig,M=s=>{if("e"in s)throw s.e;return s.v},V=z("createStore",()=>{const s=new WeakMap,a=new WeakMap,h=new Map,v=t=>s.get(t),m=(t,n)=>{const o=s.get(t);if(s.set(t,n),h.has(t)||h.set(t,o),E(o)){const r="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);o.v!==r&&q(o.v,r)}},A=(t,n,o)=>{const r=new Map;let c=!1;o.forEach((l,e)=>{!l&&e===t&&(l=n),l&&(r.set(e,l),n.d.get(e)!==l&&(c=!0))}),(c||n.d.size!==r.size)&&(n.d=r)},w=(t,n,o)=>{const r=v(t),c={d:(r==null?void 0:r.d)||new Map,v:n};if(o&&A(t,c,o),S(r,c)&&r.d===c.d)return r;if(E(r)&&E(c)&&U(r,c)){if(r.d===c.d)return r;c.v=r.v}return m(t,c),c},H=(t,n,o,r)=>{if(T(n)){let c;const l=()=>{const i=v(t);if(!E(i)||i.v!==e)return;const u=w(t,e,o);a.has(t)&&i.d!==u.d&&J(t,u,i.d)},e=new Promise((i,u)=>{let f=!1;n.then(d=>{f||(f=!0,B(e,d),i(d),l())},d=>{f||(f=!0,F(e,d),u(d),l())}),c=d=>{f||(f=!0,d.then(g=>B(e,g),g=>F(e,g)),i(d))}});return e.orig=n,e.status="pending",R(e,i=>{i&&c(i),r==null||r()}),w(t,e,o)}return w(t,n,o)},_=(t,n,o)=>{const r=v(t),c={d:(r==null?void 0:r.d)||new Map,e:n};return o&&A(t,c,o),G(r,c)&&r.d===c.d?r:(m(t,c),c)},p=(t,n)=>{const o=v(t);if(!n&&o&&(a.has(t)||Array.from(o.d).every(([f,d])=>{if(f===t)return!0;const g=p(f);return g===d||S(g,d)})))return o;const r=new Map;let c=!0;const l=f=>{if(f===t){const g=v(f);if(g)return r.set(f,g),M(g);if(O(f))return r.set(f,void 0),f.init;throw new Error("no atom init")}const d=p(f);return r.set(f,d),M(d)};let e,i;const u={get signal(){return e||(e=new AbortController),e.signal},get setSelf(){return!i&&C(t)&&(i=(...f)=>{if(!c)return P(t,...f)}),i}};try{const f=t.read(l,u);return H(t,f,r,()=>e==null?void 0:e.abort())}catch(f){return _(t,f,r)}finally{c=!1}},$=t=>M(p(t)),x=t=>{let n=a.get(t);return n||(n=j(t)),n},k=(t,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(t)),K=t=>{const n=a.get(t);n&&k(t,n)&&W(t)},Q=t=>{const n=new Map,o=new WeakMap,r=e=>{var i;const u=new Set((i=a.get(e))==null?void 0:i.t);return h.forEach((f,d)=>{var g;(g=v(d))!=null&&g.d.has(e)&&u.add(d)}),u},c=e=>{r(e).forEach(i=>{i!==e&&(n.set(i,(n.get(i)||new Set).add(e)),o.set(i,(o.get(i)||0)+1),c(i))})};c(t);const l=e=>{r(e).forEach(i=>{var u;if(i!==e){let f=o.get(i);if(f&&o.set(i,--f),!f){let d=!!((u=n.get(i))!=null&&u.size);if(d){const g=v(i),X=p(i,!0);d=!S(g,X)}d||n.forEach(g=>g.delete(i))}l(i)}})};l(t)},I=(t,...n)=>{let o=!0;const r=e=>M(p(e)),c=(e,...i)=>{let u;if(e===t){if(!O(e))throw new Error("atom not writable");const f=v(e),d=H(e,i[0]);S(f,d)||Q(e)}else u=I(e,...i);return o||D(),u},l=t.write(r,c,...n);return o=!1,l},P=(t,...n)=>{const o=I(t,...n);return D(),o},j=(t,n,o)=>{var r;const c=o||[];(r=v(t))==null||r.d.forEach((e,i)=>{const u=a.get(i);u?u.t.add(t):i!==t&&j(i,t,c)}),p(t);const l={t:new Set(n&&[n]),l:new Set};if(a.set(t,l),C(t)&&t.onMount){const{onMount:e}=t;c.push(()=>{const i=e((...u)=>P(t,...u));i&&(l.u=i)})}return o||c.forEach(e=>e()),l},W=t=>{var n;const o=(n=a.get(t))==null?void 0:n.u;o&&o(),a.delete(t);const r=v(t);r&&(E(r)&&q(r.v),r.d.forEach((c,l)=>{if(l!==t){const e=a.get(l);e&&(e.t.delete(t),k(l,e)&&W(l))}}))},J=(t,n,o)=>{const r=new Set(n.d.keys()),c=new Set;o==null||o.forEach((l,e)=>{if(r.has(e)){r.delete(e);return}c.add(e);const i=a.get(e);i&&i.t.delete(t)}),r.forEach(l=>{const e=a.get(l);e?e.t.add(t):a.has(t)&&j(l,t)}),c.forEach(l=>{const e=a.get(l);e&&k(l,e)&&W(l)})},D=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([n,o])=>{const r=v(n);if(r){const c=a.get(n);c&&r.d!==(o==null?void 0:o.d)&&J(n,r,o==null?void 0:o.d),c&&!(!E(o)&&(S(o,r)||G(o,r)))&&c.l.forEach(l=>l())}})}};return{get:$,set:P,sub:(t,n)=>{const o=x(t);D();const r=o.l;return r.add(n),()=>{r.delete(n),K(t)}}}});let b;const Y=z("getDefaultStore",()=>(b||(b=V()),b))}}});
